<HTML>

<HEAD>
  <title></title>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8" />
  <script src="./assets/lib/ajax.js"></script>
  <script src="./assets/lib/doT.min.js"></script>

  <!-- <link type="text/css" rel="stylesheet" href="./assets/theme/simple.css"> -->
</HEAD>


<BODY>
  <script id="headtpl" type="text/template">
    <h3 class="storeHead defaultBorder">{{=it.title}}</h3>
  </script>
  <script id="appTpl" type="text/template">
    <div class="appboxWarp">
      {{~it.apps :app:index}}
      <div class="appbox defaultBorder">
        <div class="appIcon">
          <a href="{{=app.runUrl}}">
            {{? app.iconUrl}}
            <img src="{{=app.iconUrl}}" onerror="this.onerror='';src='./assets/icons/default.png'">
            {{?}}
            {{? !app.iconUrl}}
            <img src="./assets/icons/default.png">
            {{?}}
          </a>
        </div>
        <div class="appname">
          {{=app.name}}
        </div>
        <div class="apptoolbar">
          <a class="appBtn" href="{{=app.runUrl}}">直接启动</a>
          <a class="appBtn" href="{{=app.stepUrl}}">首次安装</a>
        </div>
        <div class="appDesc">
          {{? app.description}}
          <div>{{=app.description}}</div>
          {{?}}
          {{? app.remark}}
          <div>{{=app.remark}}</div>
          {{?}}
          <div>最新版本：{{=app.version}} 发布日期：{{=app.publishDate}}</div>
        </div>
      </div>
      {{~}}
      </ul>
  </script>
  <div id="content"></div>
  <div class="extDesc defaultBorder">
    <ul>
      <li>
        如果使用Chrome系列浏览器可以在首次安装
        <a href="https://chrome.google.com/webstore/detail/clickonce-for-google-chro/kekahkplibinaibelipdcikofmedafmb">ClickOnce
          for Google Chrome</a>
        来启动应用
      </li>
      <li>
        如果使用IE浏览器可直接启动应用
      </li>
    </ul>
  </div>
</BODY>
<!--用于切换流量演示，可去掉-->
<script src="./assets/lib/tool.js"></script>
<script>
  var config = "./assets/config.json";

  function initApp(config) {
    window.document.title = config.title;
   
    var chtml = getTemplate('headtpl', config);
    chtml = chtml + getTemplate('appTpl', config);
    window.document.getElementById('content').innerHTML = chtml;
  }

  function getTemplate(selector, data) {
    var tpl = doT.template(window.document.getElementById(selector).innerHTML);
    return tpl(data);
  }

  function load(){
    window.get(config,null,function(data){
      initApp(JSON.parse(data));
    });
  }

  load();

</script>
</HTML>